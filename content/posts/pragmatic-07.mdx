---
date: 2022-04-02
title: 실용주의 프로그래머 07
subtitle: 노마드코더 북클럽 실용주의 프로그래머 1기에 참여하며 남기는 기록
tags: ['노마드 개발자 북클럽', '실용주의 프로그래머']
slug: /posts/pragmatic-programmer-07
---

> [노마드코더 북클럽 실용주의 프로그래머](https://nomadcoders.co/pragmatic-programmer?utm_source=Nomad+Academy&utm_campaign=b21db3e0fc-EMAIL_CAMPAIGN_2022_03_11&utm_medium=email&utm_term=0_4313d957c9-b21db3e0fc-44797189&mc_cid=b21db3e0fc&mc_eid=ada1dd7049) 1기에 참여하며 남기는 기록

<br />

## 📖 읽은 범위

7장. 코딩하는 동안

---

## 📍 TIL 3줄 요약

- 프로그램이 정확하게 생산적으로 작동하려면 코딩을 하는 동안 느끼는 스스로의 본능을 알아차리고 적절하게 반응해야 한다.
- 우연에 맡기는 프로그래밍이 아닌 의도적인 프로그래밍을 하자. 애초에 오류를 적게 말들고, 가능한 한 개발 주기 초기에 오류를 찾아서 고칠 수 있다. `#돌멩이 수프와 삶은 개구리`
- 프로그래밍은 정원을 가꾸는 것과 같다. 무언가 잘못되었다는 생각이 들면 주저하지 말고 리팩터링하자. 밖으로 드러나는 동작이 바뀌지 않는다는 것을 보장하려면 코드의 동작을 검증하는 좋은 자동화된 단위 테스트가 필요하다. 명심할 점은 테스트는 버그를 찾기 위한 것이 아니라는 것이다. 테스트의 가치는 테스트에 대해 생각함으로써 ETC하고 견고한 소프트웨어를 만드는 것에 있다.

---

## ✏️ 기억하고 싶은 내용

### Topic 37. 파충류의 뇌에 귀 기울이기

- 본능이란 우리 뇌의 무의식 속에 채워져 있는 패턴에 대한 단순한 반응이다. 일부는 선천적이고, 나머지는 반복을 통해 습득한다. 프로그래머로서 경험이 늘어 갈수록 여러분의 뇌에는 암묵적인 지식이 켜켜이 쌓인다. 잘 되는 방법, 잘 안되는 방법, 오류 형태별로 가능한 원인 등 일하는 동안 보고 듣고 느끼는 모든 것이 쌓인다.
- 본능이 반응하고 있음을 인지하라. 그리고 왜 그런 느낌이 드는지 알아내야 한다.
- 어떤 작업을 앞두고 마음속에 의심이 계속 남아있거나 왠지 꺼림칙하다면, 여러분의 경험이 여러분에게 말을 거는 중일지도 모른다. 그 느낌을 따라라. 어떤 것이 문제라고 정확하게 짚지는 못하더라도, 시간이 지나면 여러분의 의심은 좀 더 실체가 있고 대응책을 생각할 수 있는 무엇으로 구체화될 것이다. 직감이 여러분의 역량에 일조하도록 하라.
- 여러분은 그저 실수할까 봐 두려운 것일 수 있다. 합리적인 두려움이다.

#### 파충류의 뇌와 이야기하는 법

- 일단, 하고 있는 일을 멈춰라. 코드에 대해 생각하지 말고 키보드에서 떨어져서 잠깐 머리를 비운 채로 할 수 있는 일을 하라. 언젠가는 다시 생각이 의식의 영역으로 올라와서 '아하!'하는 순간이 찾아올 것이다.
- 이 방법이 잘 안되면 문제를 표면으로 끄집어내 보라. 작성하는 코드에 대한 그림을 그려 보라. 동료에게 설명해 보라.
- 이미 존재하는 코드 위에서 작업하고 있어서 기존 코드 때문에 문제 해결이 여의치 않다면, 기존 코드를 잠시 다른 곳으로 밀어 두고 비슷한 것을 대신 프로토타이핑으로 만들어라. 그리고 꺼림칙한 느낌이 코딩 도중에 갑자기 명확한 문제로 구체화되면 즉각 해결하라.

#### 코드뿐이 아니다

- 직감에 귀 기울이는 방법은 계속 갈고닦아야 할 중요한 기술이다. 가끔은 설계가 왠지 이상하게 느껴질 수도 있고, 어떤 요구사항이 마음을 불편하게 할 수도 있다. 하던 일을 멈추고 그 느낌을 분석하라.

<br />

### Topic 38. 우연에 맡기는 프로그래밍

- 왜 코드가 망가졌는지 모르는 까닭은 애초에 코드가 왜 잘 돌아가는지도 몰랐기 때문이다.
- 가정하지 말라. 증명하라.
- 잘 되는 듯한 답을 찾는 것과 올바른 답을 찾는 것은 다르다.

#### 의도적으로 프로그래밍하기

- 언제나, 지금 무엇을 하고 있는지 알아야 한다.
- 다른 사람에게 코드를 상세히 설명할 수 있는가? 그렇지 않다면 아마 우연에 기대고 있는 것일 터이다.
- 자신도 잘 모르는 코드를 만들지 말라. 완전히 파악하지 못한 애플리케이션을 빌드하거나, 이해하지 못한 기술을 사용하면 우연의 함정에 빠질 가능성이 높다. 이것이 왜 동작하는지 잘 모른다면 왜 실패하는지도 알 리가 없다.
- 신뢰할 수 있는 것에만 기대라. 가정에 의존하지 말라.
- 가정을 기록으로 남겨라. 계약에 의한 설계를 따르면 자신의 마음속에서 가정을 명확하게 하는 데 도움이 될 뿐더러, 다른 사람과 그에 대해 소통하는 데에도 도움이 된다.
- 코드뿐 아니라 여러분이 세운 가정도 테스트해 보아야 한다. 어떤 일이든 추측만 하지 말고 실제로 시험해 보라.
- 노력을 기울일 대상의 우선순위를 정하라. 중요한 것에 먼저 시간을 투자하라. 중요한 부분이 가장 어려운 부분이기도 한 경우가 많다. 기본이나 기반 구조가 제대로 되어 있지 않다면 현란한 부가기능도 다 부질없다.
- 과거의 노예가 되지 말라. 기존 코드가 앞으로 짤 코드를 지배하도록 놓아두지 말라. 더는 적절한 코드가 아니다 싶으면 어떤 코드라도 교체할 수 있다. 언제나 리팩터링할 자세가 되어 있어야 한다.

<br />

### Topic 40. 리팩터링

- 소프트웨어 개발은 건축보다 정원 가꾸기에 더 가깝다. 유기적인 활동이다.
- 리팩터링 : 밖으로 드러나는 동작은 유지한 채 내부 구조를 변경함으로써 이미 존재하는 코드를 재구성하는 체계적 기법
- 리팩터링을 식물을 다시 심기 위해 정원 전체를 갈아엎듯이 해서는 안 된다. 잡초 제거나 갈퀴질처럼 위험하지 않은 **작은 단계**들을 밟는 **일상 활동**이다. 무질서하게 대규모로 코드를 다시 쓰는 것이 아니라, 정확한 목적을 가지고 정밀하게 접근하는 활동이다. 그래서 코드를 바꾸기 쉽게 유지하는 것이다.
- 밖으로 드러나는 동작이 바뀌지 않는다는 것을 보장하려면 코드의 동작을 검증하는 좋은 자동화된 단위 테스트가 필요하다.

#### 리팩터링은 언제 하는가?

- 여러분이 작년이나 어제, 심지어 10분 전과 비교해서 더 많이 알게 되었다면, 리팩터링을 한다.
- 무엇이든 잘못되었다는 생각이 들 때가 있을 것이다. 주저하지 말고 변경하라. 언제나 바로 지금이 최적기다. 코드를 리팩터링할 이유는 아주 많다.
- **일정의 압박은 리팩터링을 하지 않는 단골 핑계다.** 하지만 이는 설득력이 떨어진다. 지금 리팩터링을 하지 않으면 일이 더 진척되었을 때, 즉 신경 써야 할 의존성이 더 많아졌을 때 문제를 고쳐야 하고, 따라서 훨씬 더 많은 시간을 투자해야 한다.
- `일찍 리팩터링하고, 자주 리팩터링하라.`
- 일정에 리팩터링할 시간을 확실히 포함시켜 두도록 하라.

#### 리팩터링은 어떻게 하는가?

- 리팩터링과 기능 추가를 동시에 하지 말라.
- 리팩터링을 시작하기 전 든든한 테스트가 있는 먼저 확인하라.
- 단계를 작게 나누어서 신중하게 작업하라.
- 마틴 파울러가 한 조언의 핵심은 탄탄한 회귀 테스트를 유지하는 것이야말로 안전한 리팩터링의 비결이라는 것이다.

<br />

### Topic 41. 테스트로 코딩하기

- 테스트는 버그를 찾기 위한 것이 아니다. 우리는 테스트의 주요한 이득이 테스트를 실행할 때가 아니라 테스트에 대해 생각하고, 테스트를 작성할 때 생긴다고 믿는다.
- `테스트가 코드의 첫 번째 사용자다.`
- 다른 코드와 긴밀하게 결합된 함수나 메서드는 테스트하기 힘들다. 메서드를 실행하기도 전에 온갖 환경 구성을 한참 해야 하기 때문이다. 즉, 무언가를 테스트하기 좋게 만들면 결합도도 낮아진다.
- 게다가 무언가를 테스트하려면 그것을 이해해야만 한다.

<br />

#### TDD: 목표가 어디인지 알아야 한다

- 명백히 테스트는 개발을 이끌어 나가는 데 도움이 된다. 하지만 나아갈 때마다 목적지를 떠올리지 않으면 계속 같은 자리만 빙빙 돌게 될 수도 있다.

<br />

#### 단위 테스트

각 모듈의 동작을 검증하기 위해 다른 것들로부터 분리(isolate)시켜 놓고 테스트를 수행한다. 모듈을 통제된 환경에서 철저하게 테스트하고 나면, 넓은 바깥세상에서 그 모듈이 어떻게 행동할지 더 잘 알게 될 것이다.

<br />

#### 계약을 지키는지 테스트하기

- 우리는 단위 테스트를 계약을 잘 지키는지 보는 테스트라고 여긴다. 어떤 코드 단위가 자신이 맺은 계약을 지키는지 확인하는 테스트는 우리에게 두 가지를 알려준다. 하나는 코드가 계약을 지키는지 여부고, 다른 하나는 코드로 표현된 계약의 의미가 우리가 생각한 것과 일치하는지 여부다.

<br />

#### 테스트 문화

- 테스트 코드를 다른 제품 코드와 마찬가지로 다뤄라. 결합도를 낮추고, 깨끗하고 견고하게 유지하라.
- 여러분이 소프트웨어를 테스트하라. 그러지 않으면 사용자가 테스트하게 된다.
- 명심하라. 테스트는 프로그래밍의 읿부다. 테스트, 설계, 코딩, 이 모든 것이 프로그래밍이다.

<br />

### Topic 42. 속성 기반 테스트

- 코드에 존재하는 계약과 불변식(invariant)을 뭉뚱그려서 속성(property)라고 부른다. 코드에서 속성을 찾아내서 테스트 자동화에 사용할 수 있는데, 이것을 속성 기반 테스트(property-based testing)라 한다.
- `속성 기반 테스트로 가정을 검증하라.`

<br />

#### 속성 기반 테스트는 설계에도 도움을 준다

- 단위 테스트의 주요 장점 중에 코드에 대해 생각하게 만드는 것이 있다고 설명했었다. 단위 테스트가 여러분이 만드는 API의 첫 번째 고객이라고도 했다. 속성 기반 테스트도 마찬가지이긴 한데 그 방법이 살짝 다르다.
- 속성 기반 테스트는 여러분이 코드를 불변식과 계약이라는 관점으로 바라보게 한다. 여러분은 무엇이 변하지 않아야 하고, 어떤 조건을 만족해야 하는지 생각하게 된다. 이런 관점으로 보면 경계 조건을 줄어들고, 데이터의 일관성을 해치는 함수는 더 도드라진다.
- 우리는 속성 기반 테스트가 단위 테스트를 보완한다고 믿는다. 둘은 서로 다른 문제를 해결하고 각각의 장점이 있다.

<br />

### Topic 43. 바깥에서는 안전에 주의하라

#### 기본 보안 원칙

1. 공격 표면을 최소화하라

- 복잡한 코드는 예상 외의 부작용이 일어날 확률을 높이고, 결과적으로 공격 표면을 넓힌다.
- 외부의 데이터를 절대 신뢰하지 말라. 데이터베이스나 화면 렌더링, 그 밖의 다른 처리 루틴에 전달하기 전에 언제나 나쁜 내용을 제거하라.
- 인증이 없는 서비스는 공격 매개체다.
- 인증을 요구하는 서비스도 공격 매개체다. 인증 받은 사용자의 수를 언제나 최소로 유지하라.
- 출력 데이터는 공격 매개체다. 정보를 누설하지 말라.
- 디버깅 정보는 공격 매개체다.

2. 최소 권한 원칙

- 최소한의 권한만을 꼭 필요한 시간만큼만 제일 짧게 부여하라는 게 또다른 핵심 원칙이다. 권한을 얻은 후 최소한의 필요한 일만 수행하고 바로 권한을 파기하여 위험을 줄여야 한다.
- 권한이야말로 적을수록 낫다. (less is more)

3. 안전한 기본값

- 애플리케이션 혹은 웹사이트 사용자의 기본 설정은 가장 안전한 값이어야 한다. 가장 안전한 값이 가장 사용자 친화적인 값이나 편리한 값은 아닐 수 있겠지만, 각 사용자가 직접 보안과 편리함 사이에서 고르도록 하는 편이 낫다.

4. 민감 정보를 암호화하라

- 암호나 API키, SSH키, 암호화 비밀번호, 그 밖의 다른 인증 정보를 소스코드용 버전 관리 시스템에 넣지 말라. 대신 빌드나 배포 프로세스 내에서 설정 파일이나 환경 변수로 관리한다.

5. 보안 업데이트를 적용하라

<br />

### Topic 44. 이름 짓기

- 프로그래밍에서는 이름이 '모든 것!'이다. 이름은 여러분의 의도와 믿음을 잔뜩 드러내기 때문이다.
- 우리는 코드에서 하는 역할에 따라 이름을 지어야 한다고 믿는다. 이 말은 무언가를 만들 때마다 잠시 멈춰서 '내가 이것을 왜 만드는 거지?'하고 생각해야 한다는 뜻이다.
- 이 질문은 아주 효과적이다. 여러분이 문제 풀이 사고방식에서 벋어나 더 큰 그림을 보도록 하기 때문이다. 변수나 함수의 역할을 고려하려면 그 변수나 함수가 무엇이 특별한지, 무엇을 할 수 있는지, 무엇과 상호작용하는지를 생각해야만 한다.
- 이름을 지을 때는 여러분이 표현하고 싶은 것을 더 명확하게 다듬기 위해 끊임없이 노력해야 한다. 이렇게 명확하게 다듬는 작업이 여러분이 코드를 작성할 때 코드를 더 잘 이해할 수 있도록 도울 것이다.

---

## 💭 소감

- 그동안 내가 우연에 맡기는 프로그래밍을 꽤 많이 해왔다는걸 깨달았다. 특히 이런저런 이유로 나 스스로도 잘 모르는, 다른 사람에게 설명할 수 없는 코드를 작성한 적이 꽤 많았는데, 그래서인지 책을 읽으면서 반성을 많이 했다. 앞으로는 다른 사람에게 코드의 동작 방식을 상세히 설명할 수 있을 정도로 코드를 알고 써야겠다고 다짐했다.
- 리팩터링은 고통 관리를 실천하는 것이라는 구절에 크게 공감했다. 그리고 나는 과연 순간순간의 고통을 회피하고자 리팩토링을 미루진 않았는지 되돌아봤다.
- 속성 기반 테스트라는걸 처음 알게 되었다. 개인적으로 진행하는 리액트 프로젝트에 도입해봐야겠다는 생각이 들었다.
