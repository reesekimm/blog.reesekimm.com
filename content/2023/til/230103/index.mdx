---
date: 2023-01-03
title: React Hooks
subtitle: React Hooks ê°„ë‹¨ ê°œë… ì •ë¦¬
category: til
tags: ['react']
slug: /230103
---

# 1. Why Hooks?

[[Reference]](https://reactjs.org/docs/hooks-intro.html#motivation)

<br />

HooksëŠ” ê¸°ì¡´ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ê°€ ê°€ì§„ ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í–ˆë‹¤.

## í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ê°€ ê°€ì§„ ë¬¸ì œì ë“¤

### 1. ìë°”ìŠ¤í¬ë¦½íŠ¸ Class

`constructor`, `super`, `this`, `bind`, ...

ìë°”ìŠ¤í¬ë¦½íŠ¸ Class ë¬¸ë²•ì„ ë‹¤ë£¨ëŠ”ë°ì„œ ì˜¤ëŠ” ì–´ë ¤ì›€ì´ Reactë¥¼ ì–´ë µê²Œ ëŠë¼ê²Œ ë§Œë“ ë‹¤.

### 2. Lifecycle ë©”ì„œë“œ

í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” í•˜ë‚˜ì˜ ê¸°ëŠ¥(concern)ì´ ì—¬ëŸ¬ lifecycle ë©”ì„œë“œì— ë¶„ì‚°ë ìˆ˜ë°–ì— ì—†ë‹¤.

ê¸°ëŠ¥ì´ ë§ì•„ì§ˆìˆ˜ë¡ ì½”ë“œì˜ ë³µì¡ë„ê°€ ë†’ì•„ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤.

### 3. ë¡œì§ì˜ ì¬ì‚¬ìš©ì´ ì–´ë ¤ì›€

í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ íŒ¨í„´ë“¤(mixins, Higher-Order Components, render props)ì€ ëª¨ë‘ ê·¸ ì¥ì ë³´ë‹¤ ë‹¨ì ì´ ë” í¬ë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ `Wrapper Hell` ë¬¸ì œê°€ ìˆë‹¤.

## Hookì€ ì´ ë¬¸ì œë“¤ì„ ì–´ë–»ê²Œ í•´ê²°í•˜ë‚˜?

### 1. Class ëŒ€ì‹  í•¨ìˆ˜

ReactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì˜í• ë•Œ Class ëŒ€ì‹  í•¨ìˆ˜ë¥¼ ì¨ì„œ Class ë¬¸ë²•ì´ ì•¼ê¸°í•˜ëŠ” ë¶ˆí•„ìš”í•œ ë³µì¡ë„ë¥¼ ì œê±°í–ˆë‹¤.

### 2. Lifecycle ë©”ì„œë“œ ëŒ€ì‹  hook

useState, useEffect ë“±ì˜ hookì„ ì‚¬ìš©í•˜ì—¬ ê´€ì‹¬ì‚¬ë¥¼ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í–ˆë‹¤.

í•˜ë‚˜ì˜ ê´€ì‹¬ì‚¬ê°€ ì—¬ëŸ¬ lifecycle ë©”ì„œë“œì— ê±¸ì³ì„œ ë¶„ì‚°ë˜ì–´ ìˆë˜ ë•Œì™€ ë¹„êµí•˜ë©´ ê´€ì‹¬ì‚¬ì˜ ì‘ì§‘ë„ê°€ ë†’ì•„ì¡Œê³  ì½”ë“œì˜ ê°€ë…ì„± ì—­ì‹œ ì¢‹ì•„ì¡Œë‹¤.

### 3. Custom hook

ì—¬ëŸ¬ê°œì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì€ ë¡œì§ì´ ìˆë‹¤ë©´ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•˜ë©´ ëœë‹¤. ë°”ë¡œ Custom hookì´ë‹¤.

Custom hookì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ì‰½ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í…ŒìŠ¤íŠ¸ í•˜ê¸°ë„ ì‰½ë‹¤.

> **Custom hookì„ ë„¤ì´ë° í• ë–„ `use`ë¡œ ì‹œì‘í•˜ëŠ” conventionì„ ì“°ëŠ” ì´ìœ **
>
> 1. React ë‚´ë¶€ì ìœ¼ë¡œ Custom hookì„ 'hook'ìœ¼ë¡œ ì¸ì§€í•˜ê³  `Rules of hook`ì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œë‹¤.
> 2. Custom hookì´ potentially statefulí•˜ë‹¤ëŠ” ê²ƒì„(=stateë¥¼ ê°€ì§€ê³  ìˆì„ìˆ˜ ìˆìŒì„) ì§ê´€ì ìœ¼ë¡œ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ì„œë‹¤.

# 2. Rules of Hooks

[[Reference]](https://reactjs.org/docs/hooks-rules.html)

### 1. hookì€ ì»´í¬ë„ŒíŠ¸ë‚´ ìµœìƒìœ„ ë ˆë²¨ì—ì„œë§Œ í˜¸ì¶œí•´ì•¼ í•œë‹¤.

ë£¨í”„, ì¡°ê±´ë¬¸, ì¤‘ì²©í•¨ìˆ˜ ë‚´ì—ì„œëŠ” hookì„ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.

ìµœìƒìœ„ ë ˆë²¨ì—ì„œ í˜¸ì¶œí•´ì•¼ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ í•­ìƒ ë™ì¼í•œ ìˆœì„œë¡œ hookì´ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆ˜ ìˆê³ , useStateì™€ useEffectê°€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë˜ë”ë¼ë„ ìƒíƒœë¥¼ ì˜¬ë°”ë¥´ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

### 2. hookì€ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë˜ëŠ” custom hook ë‚´ì—ì„œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

ì¼ë°˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ ë‚´ì—ì„œëŠ” hookì„ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.

---

#### 1ë²ˆ ê·œì¹™ì— ëŒ€í•œ ì„¤ëª…

í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ ì•ˆì— ì—¬ëŸ¬ê°œì˜ useState/useEffect hookì´ ìˆì„ë•Œ ReactëŠ” ì–´ë–»ê²Œ stateë“¤ì„ êµ¬ë¶„í•  ìˆ˜ ìˆì„ê¹Œ?

```js
function Form() {
  // 1. Use the name state variable
  const [name, setName] = useState('Mary')

  // 2. Use an effect for persisting the form
  useEffect(function persistForm() {
    localStorage.setItem('formData', name)
  })

  // 3. Use the surname state variable
  const [surname, setSurname] = useState('Poppins')

  // 4. Use an effect for updating the title
  useEffect(function updateTitle() {
    document.title = name + ' ' + surname
  })

  // ...
}
```

ReactëŠ” hookì´ í˜¸ì¶œë˜ëŠ” ìˆœì„œì— ì˜ì¡´í•œë‹¤.

```js
// ------------
// First render
// ------------
useState('Mary') // 1. Initialize the name state variable with 'Mary'
useEffect(persistForm) // 2. Add an effect for persisting the form
useState('Poppins') // 3. Initialize the surname state variable with 'Poppins'
useEffect(updateTitle) // 4. Add an effect for updating the title

// -------------
// Second render
// -------------
useState('Mary') // 1. Read the name state variable (argument is ignored)
useEffect(persistForm) // 2. Replace the effect for persisting the form
useState('Poppins') // 3. Read the surname state variable (argument is ignored)
useEffect(updateTitle) // 4. Replace the effect for updating the title

// ...
```

> ì²«ë²ˆì§¸ useStateëŠ” `name` ìƒíƒœê°’ê³¼ ì—°ê²°\
> ì²«ë²ˆì§¸ useEffectëŠ” `persistForm` effectë¥¼ ìˆ˜í–‰\
> ë‘ë²ˆì§¸ useStateëŠ” `surname` ìƒíƒœê°’ê³¼ ì—°ê²°\
> ë‘ë²ˆì§¸ useEffectëŠ” `updateTitle` effectë¥¼ ìˆ˜í–‰

ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ ìœ„ì™€ê°™ì´ ë™ì¼í•œ í˜¸ì¶œ ìˆœì„œë¥¼ ìœ ì§€í•˜ëŠ”í•œ ReactëŠ” ê°ê°ì˜ ìƒíƒœë¥¼ êµ¬ë¶„í•˜ê³  useState/useEffectì™€ ì—°ê²°í•˜ì—¬ ìƒíƒœê°’ì„ ê¸°ì–µí•˜ê³  ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ì¡°ê±´ë¬¸ ì•ˆì—ì„œ hookì„ í˜¸ì¶œí•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

```js
// ğŸ”´ We're breaking the first rule by using a Hook in a condition
if (name !== '') {
  useEffect(function persistForm() {
    localStorage.setItem('formData', name)
  })
}
```

ì¡°ê±´ì— ë”°ë¼ hookì´ í˜¸ì¶œë˜ì§€ ì•Šê³  ì „ì²´ì ì¸ í˜¸ì¶œ ìˆœì„œê°€ ë‹¬ë¼ì§„ë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ìƒíƒœê°’ì„ êµ¬ë¶„í•  ìˆ˜ ì—†ê³  useState/useEffectì™€ì˜ ì—°ê²°ì •ë³´ê°€ ì–´ê·¸ëŸ¬ì§€ë©´ì„œ ë²„ê·¸ê°€ ë°œìƒí•œë‹¤.

```js
useState('Mary') // 1. Read the name state variable (argument is ignored)
// useEffect(persistForm)  // ğŸ”´ This Hook was skipped!
useState('Poppins') // ğŸ”´ 2 (but was 3). Fail to read the surname state variable
useEffect(updateTitle) // ğŸ”´ 3 (but was 4). Fail to replace the effect
```

# 3. Hook Flow

![Hook Flow](./hook-flow.png)
