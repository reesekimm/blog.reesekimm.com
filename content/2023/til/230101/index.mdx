---
date: 2023-01-01
title: 웹페이지 렌더링 방식의 변천사
subtitle: MPA부터 SSR까지
category: til
tags: ['Web']
slug: /230101
---

## 1. MPA (Multi-page application)

전통적인 웹 애플리케이션은 여러개의 HTML로 이루어진 MPA였다.

클라이언트가 URL을 입력할때마다 서버로 요청을 보내고, 서버는 해당 URL에 해당하는 HTML을 생성하여 응답해주는 식으로 화면을 렌더링 했다.

문제점

- URL이 바뀔 때마다 서버로부터 새로운 HTML을 받아서 표시하기 때문에 화면 전체가 깜빡거린다.
- 모든 페이지를 서버에서 생성하기 때문에 요청이 많아질수록 서버의 부담이 커진다.

## 2. AJAX

웹 기술이 발전하면서 AJAX(Asynchronous Javascript And XML)가 등장한다.

클라이언트는 화면에서 변경이 필요한 부분의 데이터를 서버로 요청하면 서버는 해당 데이터를 JSON 형태로 반환한다.

클라이언트는 JSON 데이터를 '비동기적으로' 가져와서 화면을 '부분적으로' 새로 그릴 수 있게 되었다.

이로써 서버의 요청을 기다리는 동안 기존 화면을 그대로 보여줄 수 있기 때문에 사용자 경험이 개선되었다.

하지만 여전히 URL이 변경되면(=페이지를 이동하면) 새로운 HTML을 내려받아서 표시했기 때문에 화면 깜빡임이 발생했다.

URL이 바뀌어도 화면 깜빡임 없이 애플리케이션을 이용할 순 없을까?

이러한 고민의 결과물이 바로 SPA다.

## 3. SPA 그리고 CSR

### SPA(Single-page Application)

말그대로 페이지가 하나인 애플리케이션. 하나의 HTML로 모든 화면을 표시한다.

SPA 구현을 쉽게 할 수 있게 해주는 라이브러리가 바로 React 같은 라이브러리다.

SPA는 애플리케이션을 초기에 로드할때 서버로부터 body가 비어있는 하나의 HTML(`index.html`)을 받고, 자바스크립트 파일(`bundle.js`)을 실행시켜서 화면을 그린다.

URL을 변경할때는 기본적으로 브라우저에서 트리거되는 HTTP GET 요청은 막고 서버로부터 받은 HTML 내부를 각 페이지에 알맞게 갈아끼운다.

화면에 표시할 데이터는 클라이언트가 서버로 요청을 보내서 가져온다. (CSR)

### CSR(Client-side Rendering)

화면을 그리는데 필요한 데이터들을 클라이언트에서 필요한 시점에 서버에 요청하여 표시하는 렌더링 방식이다.

- 장점

  - 페이지 이동시 화면 깜빡임이 없기 때문에 native app 같은 사용자 경험을 제공한다.
  - CDN 등을 통해 캐싱이 가능하기 때문에 SSR 보다 많은 크래픽을 효과적으로 받아낼 수 있다.

- 단점
  - 애플리케이션의 크기가 커질수록 bundle.js의 사이즈가 커지기 때문에 초기 화면을 표시하는데까지 시간이 오래 걸린다.
    - 번들 사이즈를 줄이는 방법들: code splitting, 번들 압축, tree shaking
  - 빈 HTML을 로드하기 때문에 검색 엔진 크롤러가 인덱싱(=검색엔진 사전 제작)을 할 수 없다. → SEO에 불리하다.

## 4. SSR(Server-side Rendering)

서버에서 '데이터가 채워져 있는' HTML을 생성/반환하여 화면을 표시하는 렌더링 방식이다.

용어 자체만 놓고 보면 CSR이 등장한 이후 CSR와 상반되는 렌더링 방식을 표현하기위해 나타난 용어다.

React로 개발을 하되 SSR의 장점을 가져갈 순 없을까? → Next.js 등장

- 장점

  - CSR보다 `FCP(First Contentful Paint)`가 빠름
  - SEO에 유리하다.

- 단점

  - hydration 과정이 필요하기 때문에 인터랙션이 가능하기까지 시간이 소요될 수 있다.
  - 서버 부하가 크다.
    - 트래픽이 많이 몰릴 경우 응답이 느려지거나, 메모리가 한도를 초과하여 서버가 동작을 멈추기도 한다.
